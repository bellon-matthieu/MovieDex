<head>
    <link rel="stylesheet" href="/css/dex.css">
    <link rel="stylesheet" href="/css/dex-display.css">
</head>

<body>
    <div class="all-data-dex-container">
      <!-- Dex display -->
        <a class="dex_display" href="dex?id=<%= dataDex['_id'] %>">
              <h2 class="dex_display_name"><%= dataDex["name"] %></h2>
              <div class="movies_display">
                  <% if (dataDex["movies"][0]) {%>
                      <img class="movie_thumbnail" src="<%= dataDex["movies"][0]["thumbnail"]%>" alt="">
                  <% } %>
                  <% if (dataDex["movies"][1]) {%>
                      <img class="movie_thumbnail" src="<%= dataDex["movies"][1]["thumbnail"]%>" alt="">
                  <% } %>
                  <% if (dataDex["movies"][2]) {%>
                      <img class="movie_thumbnail" src="<%= dataDex["movies"][2]["thumbnail"]%>" alt="">
                  <% } %>
            </div>
          </a>

        <section class="dex-info">
                <div class="title"><h1><%= dataDex['name'] %></h1></div>
                <div class="creator">
                  <a href="profile?id=<%= dataDex["user"] %>"><h3>Cr√©ateur: <%= creatorUsername %></h3></a>
                </div>
                <div class="genres"><h3>Genres :</h3><%= dataDex['genres'] %></div>
        </section>

        <section class="dex-movies">
            <% for (let indexMovie = 0; indexMovie < dataDex['movies'].length; indexMovie++) {%>
                <a class="movie-dex" href="movie?id=<%= dataDex['movies'][indexMovie]['_id'] %>">
                    <img class="movie-thumbnail" src="<%= dataDex['movies'][indexMovie]["thumbnail"] %>" alt="thumbnail">
                    <% if (dataDex['user'] == idUser) { %>
                    <form action="remove-movie-from-dex" method="post">
                        <input type="text" name="idMovieRemoved" hidden value="<%= dataDex['movies'][indexMovie]['_id'] %>">
                        <input type="text" name="idDex" hidden value="<%= dataDex['_id'] %>">
                        <input class="remove-movie-button"  type="submit" value="Supprimer">
                    </form>
                <% } %>
                </a>
                
            <% } %>
        </section> 

        <section>
          <div class="dex_description"><h3>Description :</h3><%= dataDex['description'] %></div>
        </section>
    </div>

    <!-- User Options -->
    <% if (dataDex['user'] == idUser) { %>
      <div class="user-options">
        <section class="delete-dex">
            <form action="delete-dex" method="post">
                <input type="text" hidden name="idDex" value="<%= dataDex["_id"] %>">
                <input type="submit" value="Supprimer la Dex" class="delete-dex-button">
            </form>
        </section>
      </div>
    <% } %>
</body>
</html>